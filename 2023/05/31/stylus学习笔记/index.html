<!DOCTYPE html><html lang="zh-CN" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>stylus学习笔记（1） | 海花号</title><link rel="icon" type="image/x-icon" href="/favicon.ico"><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"Enter here","blurHolder":"Search","noResult":"Data \"$0\" not found"},"code":{"codeInfo":"$0 - $1 lines","copy":"copy","copyFinish":"copied","expand":"expand"}}</script><script src="//unpkg.com/mermaid@9.2.2/dist/mermaid.min.js"></script><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link type="text/css" rel="stylesheet" href="/lib/fontawesome/brands.min.css"><link type="text/css" rel="stylesheet" href="/lib/fontawesome/fontawesome.min.css"><link rel="stylesheet" href="/css/arknights.css"><script>if (window.localStorage.getItem('theme-mode') === 'light') document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark') document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}
@font-face {
 font-family: 'Font Awesome 6 Brands';
 src: local('Font Awesome 6 Brands'), url('/lib/fontawesome/fa-brands.woff2') format('woff2');
}
@font-face {
 font-family: 'Font Awesome 6 Free';
 src: local('Font Awesome 6 Free'), url('/lib/fontawesome/fa-regular.woff2') format('woff2');
}</style><style>:root {
  --dark-background: url('/img/bg.jpg');
  --light-background: url('/img/bk.jpg');
}</style><meta name="generator" content="Hexo 7.0.0-rc1"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head><body><div class="loading" style="opacity: 0"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><nav><div class="navBtn hide"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="Search" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem"><a class="navBlock" href="/about"><span class="navItemTitle">About</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives"><span class="navItemTitle">Archives</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>stylus学习笔记（1）</h1><div id="post-info"><span>First Post: <div class="control"><time datetime="2023-05-31T14:32:50.000Z" id="date"> 2023-05-31</time></div></span><br><span>Last Update: <div class="control"><time datetime="2023-06-03T06:22:42.967Z" id="updated"> 2023-06-03</time></div></span><br><span>Word Count: <div class="control">5.1k</div></span><br><span>Read Time: <div class="control">23 min</div></span></div></div><hr><div id="post-content"><h1 id="简介"><a href="#0.-简介" class="headerlink" title="0.-简介"></a>0. 简介</h1>
<p>Stylus是一款CSS预处理语言，它提供了高效、动态和富有表现力的方式来生成CSS。</p>
<p>Stylus支持缩进的语法和常规的CSS样式。具体可以参考<a target="_blank" rel="noopener" href="https://stylus-lang.com/docs">stylus官方文档</a>。</p>
<h1 id="安装-stylus"><a href="#1.-安装 stylus" class="headerlink" title="1.-安装 stylus"></a>1. 安装 stylus</h1>
<p>安装stylus非常简单，当你的电脑中安装了node.js，你可以使用npm工具按照如下命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">npm</span><br>npm install stylus -g<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">pnpm</span><br>pnpm add -g stylus<br></code></pre></td></tr></table></figure>
<span id="more"></span>
<h1 id="使用-stylus"><a href="#2.-使用 stylus" class="headerlink" title="2.-使用 stylus"></a>2. 使用 stylus</h1>
<h2 id="使用帮助"><a href="#2.1-使用帮助" class="headerlink" title="2.1-使用帮助"></a>2.1 使用帮助</h2>
<p>可以在终端使用<code>stylus</code>命令将Stylus文件转换为CSS。命令如下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs sh">Usage: stylus [options] [<span class="hljs-built_in">command</span>] [&lt; <span class="hljs-keyword">in</span> [&gt; out]]<br>              [file|<span class="hljs-built_in">dir</span> ...]<br><br>Commands:<br><br>  <span class="hljs-built_in">help</span> [&lt;<span class="hljs-built_in">type</span>&gt;:]&lt;prop&gt; Opens <span class="hljs-built_in">help</span> info at MDC <span class="hljs-keyword">for</span> &lt;prop&gt; <span class="hljs-keyword">in</span><br>                        your default browser. Optionally<br>                        searches other resources of &lt;<span class="hljs-built_in">type</span>&gt;:<br>                        safari opera w3c ms caniuse quirksmode<br><br>Options:<br><br>  -i, --interactive       Start interactive REPL<br>  -u, --use &lt;path&gt;        Utilize the Stylus plugin at &lt;path&gt;<br>  -U, --inline            Utilize image inlining via data URI support<br>  -w, --watch             Watch file(s) <span class="hljs-keyword">for</span> changes and re-compile<br>  -o, --out &lt;<span class="hljs-built_in">dir</span>&gt;         Output to &lt;<span class="hljs-built_in">dir</span>&gt; when passing files<br>  -C, --css &lt;src&gt; [dest]  Convert CSS input to Stylus<br>  -I, --include &lt;path&gt;    Add &lt;path&gt; to lookup paths<br>  -c, --compress          Compress CSS output<br>  -d, --compare           Display input along with output<br>  -f, --firebug           Emits debug infos <span class="hljs-keyword">in</span> the generated CSS that<br>                          can be used by the FireStylus Firebug plugin<br>  -l, --line-numbers      Emits comments <span class="hljs-keyword">in</span> the generated CSS<br>                          indicating the corresponding Stylus line<br>  -m, --sourcemap         Generates a sourcemap <span class="hljs-keyword">in</span> sourcemaps v3 format<br>  --sourcemap-inline      Inlines sourcemap with full <span class="hljs-built_in">source</span> text <span class="hljs-keyword">in</span> <span class="hljs-built_in">base64</span> format<br>  --sourcemap-root &lt;url&gt;  <span class="hljs-string">"sourceRoot"</span> property of the generated sourcemap<br>  --sourcemap-base &lt;path&gt; Base &lt;path&gt; from <span class="hljs-built_in">which</span> sourcemap and all sources are relative<br>  -P, --prefix [prefix]   Prefix all css classes<br>  -p, --<span class="hljs-built_in">print</span>             Print out the compiled CSS<br>  --import &lt;file&gt;         Import stylus &lt;file&gt;<br>  --include-css           Include regular CSS on @import<br>  -D, --deps              Display dependencies of the compiled file<br>  --disable-cache         Disable caching<br>  --hoist-atrules         Move @import and @charset to the top<br>  -r, --resolve-url       Resolve relative urls inside imports<br>  --resolve-url-nocheck   Like --resolve-url but without file existence check<br>  -V, --version           Display the version of Stylus<br>  -h, --<span class="hljs-built_in">help</span>              Display <span class="hljs-built_in">help</span> information<br><br></code></pre></td></tr></table></figure>
<h2 id="编译文件"><a href="#2.2-编译文件" class="headerlink" title="2.2-编译文件"></a>2.2 编译文件</h2>
<p>例如，将<code>some.styl</code>文件编译为<code>some.css</code>文件可以使用如下命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">stylus -w style.styl -o style.css<br></code></pre></td></tr></table></figure>
<p>stylus同样可以编译文件夹，例如编译<code>css</code>文件夹到同名目录下的<code>.css</code>文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">stylus css<br></code></pre></td></tr></table></figure>
<p>也可以输出到其他文件夹下，如<code>./public/stylesheets</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">stylus css --out public/stylesheets<br></code></pre></td></tr></table></figure>
<p>或者同时编译多个文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">stylus one.styl tow.styl<br></code></pre></td></tr></table></figure>
<p>出于开发的目的，你也可以使用<code>linenos</code>选项将文件名和行号输出到CSS文件的注释中</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">stylus --line-numbers &lt;path&gt;<br></code></pre></td></tr></table></figure>
<h1 id="选择器-selectors"><a href="#3.-选择器 Selectors" class="headerlink" title="3.-选择器 Selectors"></a>3. 选择器 Selectors</h1>
<h2 id="缩进-indentation"><a href="#3.1-缩进 Indentation" class="headerlink" title="3.1-缩进 Indentation"></a>3.1 缩进 Indentation</h2>
<p>Stylus采用缩进式语法，可以省略<code>{</code>、<code>}</code>、<code>;</code>和<code>:</code>，如</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">body</span><br>    <span class="hljs-attribute">color</span> white<br></code></pre></td></tr></table></figure>
<p>或者选择保留<code>:</code>：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">body</span><br>    <span class="hljs-attribute">color</span>: white <br></code></pre></td></tr></table></figure>
<p>编译后：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">body</span> {<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;<br>}<br></code></pre></td></tr></table></figure>
<h2 id="规则集-rule-sets"><a href="#3.2-规则集 Rule Sets" class="headerlink" title="3.2-规则集 Rule Sets"></a>3.2 规则集 Rule Sets</h2>
<p>和css一样，可以使用<code>,</code>为多个选择器定义属性：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">textarea</span>, <span class="hljs-selector-tag">input</span><br>  <span class="hljs-attribute">border</span> <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span><br></code></pre></td></tr></table></figure>
<p>也可以换行：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">textarea</span><br><span class="hljs-selector-tag">input</span><br>  <span class="hljs-attribute">border</span> <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span><br></code></pre></td></tr></table></figure>
<p>编译后：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">textarea</span>,<br><span class="hljs-selector-tag">input</span> {<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>;<br>}<br></code></pre></td></tr></table></figure>
<p>唯一的缺点是，规则集看起来与属性有些相似，因此为避免混淆，可在末尾添加一个逗号如</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">foo bar baz,<br><span class="hljs-selector-tag">form</span> <span class="hljs-selector-tag">input</span>,<br>&gt; <span class="hljs-selector-tag">a</span><br>  <span class="hljs-attribute">border</span> <span class="hljs-number">1px</span> solid<br></code></pre></td></tr></table></figure>
<h2 id="父级引用-parent-reference"><a href="#3.3-父级引用 Parent Reference" class="headerlink" title="3.3-父级引用 Parent Reference"></a>3.3 父级引用 Parent Reference</h2>
<p>可以使用<code>&amp;</code>引用父选择器，下面的例子中，（<code>textarea</code>和<code>input</code>）两个选择器的伪类<code>:hover</code>都会改变
<code>color</code> 属性。：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">textarea</span><br><span class="hljs-selector-tag">input</span><br>  <span class="hljs-attribute">color</span> <span class="hljs-number">#A7A7A7</span><br>  <span class="hljs-selector-pseudo">&amp;:hover</span><br>    <span class="hljs-attribute">color</span> <span class="hljs-number">#000</span><br></code></pre></td></tr></table></figure>
<p>编译后：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">textarea</span>,<br><span class="hljs-selector-tag">input</span>{<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#A7A7A7</span>;<br>}<br>testarea<span class="hljs-selector-pseudo">:hover</span>,<br><span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:hover</span>{<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#000</span><br>}<br></code></pre></td></tr></table></figure>
<p>下面的例子，则是在<code>mixin</code>中使用<code>&amp;</code>给IE浏览器设置2px的边框</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">box-shadow</span><span class="hljs-params">()</span></span><br>    -webkit-<span class="hljs-attribute">box-shadow</span> arguments<br>    -moz-<span class="hljs-attribute">box-shadow</span> arguments<br>    <span class="hljs-attribute">box-shadow</span> arguments<br>    <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.ie8</span> &amp;,<br>    <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.ie7</span> &amp;,<br>    <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.ie6</span> &amp;<br>        <span class="hljs-attribute">border</span> <span class="hljs-number">2px</span> solid arguments[<span class="hljs-built_in">length</span>(arguments) - <span class="hljs-number">1</span>]<br>        <br><span class="hljs-selector-tag">body</span><br>    <span class="hljs-selector-id">#login</span><br>        <span class="hljs-attribute">box-shadow</span> <span class="hljs-number">1px</span> <span class="hljs-number">1px</span> <span class="hljs-number">3px</span> <span class="hljs-number">#eee</span><br></code></pre></td></tr></table></figure>
<p>注：<code>&amp;</code>指向
<code>body #login</code>，<code>html.ie8</code>等会拼接在<code>body</code>前面。</p>
<p>编译后</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-id">#login</span> {<br>  -webkit-<span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">1px</span> <span class="hljs-number">1px</span> <span class="hljs-number">3px</span> <span class="hljs-number">#eee</span>;<br>  -moz-<span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">1px</span> <span class="hljs-number">1px</span> <span class="hljs-number">3px</span> <span class="hljs-number">#eee</span>;<br>  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">1px</span> <span class="hljs-number">1px</span> <span class="hljs-number">3px</span> <span class="hljs-number">#eee</span>;<br>}<br><span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.ie8</span> <span class="hljs-selector-tag">body</span> <span class="hljs-selector-id">#login</span>,<br><span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.ie7</span> <span class="hljs-selector-tag">body</span> <span class="hljs-selector-id">#login</span>,<br><span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.ie6</span> <span class="hljs-selector-tag">body</span> <span class="hljs-selector-id">#login</span> {<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#eee</span>;<br>}<br></code></pre></td></tr></table></figure>
<h2 id="部分引用-partial-reference"><a href="#3.4-部分引用 Partial Reference" class="headerlink" title="3.4-部分引用 Partial Reference"></a>3.4 部分引用 Partial Reference</h2>
<p><code>^[N]</code>表示部分引用，其中N是数字(-1, 0, 1等等)。
<code>^[0]</code>引用嵌套选择器中的第一层，<code>^[1]</code>则引用<strong>第一层和第二层</strong>。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-class">.foo</span><br>  &amp;__bar<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span><br><br>    ^<span class="hljs-selector-attr">[0]</span><span class="hljs-selector-pseudo">:hover</span> &amp;<br>      <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span><br></code></pre></td></tr></table></figure>
<p>注：第一层和第二层是一个完整的选择器<code>.foo__bar</code>，但<code>^[0]</code>部分引用第一层，即<code>.foo</code>。</p>
<p>编译后：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-class">.foo__bar</span> {<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span>;<br>}<br><span class="hljs-selector-class">.foo</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.foo__bar</span> {<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;<br>}<br></code></pre></td></tr></table></figure>
<p><strong>若N为负数</strong>，则从尾部计算。如<code>^[-1]</code>表示去除最后一层后剩下部分的引用。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-class">.foo</span><br>  &amp;__bar<br>    &amp;_baz<br>      <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span><br><br>      ^<span class="hljs-selector-attr">[-1]</span><span class="hljs-selector-pseudo">:hover</span> &amp;<br>        <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span><br></code></pre></td></tr></table></figure>
<p>编译后：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-class">.foo__bar_baz</span> {<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span>;<br>}<br><span class="hljs-selector-class">.foo__bar</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.foo__bar_baz</span> {<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;<br>}<br></code></pre></td></tr></table></figure>
<h2 id="带范围的部分引用-ranges-in-partial-references">3.5
带范围的部分引用 Ranges in partial references</h2>
<p><code>^[N..M]</code>：其中一个数字是起始索引，另一个是结束索引。由于选择器是从第一层渲染至最后一层，所以N和M的顺序不影响结果。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-class">.foo</span><br>  &amp; <span class="hljs-selector-class">.bar</span><br>    &amp; <span class="hljs-selector-class">.baz</span><br>      <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span><br><br>      ^<span class="hljs-selector-attr">[0]</span><span class="hljs-selector-pseudo">:hover</span> ^<span class="hljs-selector-attr">[2..1]</span><br>        <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span><br></code></pre></td></tr></table></figure>
<p>编译后：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-class">.foo</span> <span class="hljs-selector-class">.bar</span> <span class="hljs-selector-class">.baz</span> {<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span>;<br>}<br><span class="hljs-selector-class">.foo</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.bar</span> <span class="hljs-selector-class">.baz</span> {<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;<br>}<br></code></pre></td></tr></table></figure>
<h2 id="初始引用-initial-reference"><a href="#3.6-初始引用 Initial Reference" class="headerlink" title="3.6-初始引用 Initial Reference"></a>3.6 初始引用 Initial Reference</h2>
<p><code>~/</code>代表第一层，等价于<code>^[0]</code>，缺点是只能在选择器的首部使用。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-class">.block</span><br>  &amp;__element<br>    ~/<span class="hljs-selector-pseudo">:hover</span> &amp;<br>      <span class="hljs-attribute">color</span>: red<br></code></pre></td></tr></table></figure>
<p>编译后</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-class">.block</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.block__element</span> {<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#f00</span>;<br>}<br></code></pre></td></tr></table></figure>
<h2 id="相对引用-relative-reference">3.7 相对引用 Relative
Reference</h2>
<p><code>../</code>表示相对引用，它只能在选择器首部使用。<code>../../</code>表示更深一层</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-class">.foo</span><br>  <span class="hljs-selector-class">.bar</span><br>    <span class="hljs-selector-class">.baz</span><br>      <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span><br><br>      &amp;,<br>      ../../ <span class="hljs-selector-class">.foobar</span><br>        <span class="hljs-attribute">height</span>: <span class="hljs-number">10px</span><br></code></pre></td></tr></table></figure>
<p>编译后：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.foo</span> <span class="hljs-selector-class">.bar</span> <span class="hljs-selector-class">.baz</span> {<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span>;<br>}<br><span class="hljs-selector-class">.foo</span> <span class="hljs-selector-class">.bar</span> <span class="hljs-selector-class">.baz</span>,<br><span class="hljs-selector-class">.foo</span> <span class="hljs-selector-class">.foobar</span> {<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">10px</span>;<br>}<br></code></pre></td></tr></table></figure>
<h2 id="根引用-root-reference"><a href="#3.8-根引用 Root Reference" class="headerlink" title="3.8-根引用 Root Reference"></a>3.8 根引用 Root Reference</h2>
<p><code>/</code>适用于给不在当前范围中的选择器设置样式，如下面例子中的<code>.is-hovered</code>。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">textarea</span><br><span class="hljs-selector-tag">input</span><br>  <span class="hljs-attribute">color</span> <span class="hljs-number">#A7A7A7</span><br>  <span class="hljs-selector-pseudo">&amp;:hover</span>,<br>  /<span class="hljs-selector-class">.is-hovered</span><br>    <span class="hljs-attribute">color</span> <span class="hljs-number">#000</span><br></code></pre></td></tr></table></figure>
<p>编译后：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">textarea</span>,<br><span class="hljs-selector-tag">input</span> {<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#a7a7a7</span>;<br>}<br><span class="hljs-selector-tag">textarea</span><span class="hljs-selector-pseudo">:hover</span>,<br><span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:hover</span>,<br><span class="hljs-selector-class">.is-hovered</span> {<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#000</span>;<br>}<br></code></pre></td></tr></table></figure>
<h2 id="歧义-disambiguation"><a href="#3.9-歧义 Disambiguation" class="headerlink" title="3.9-歧义 Disambiguation"></a>3.9 歧义 Disambiguation</h2>
<p>表达式<code>margin - n</code>可以被解析为减法运算，或具有一元减号的属性。为了消除歧义，可以在表达式外使用一对括号。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">pad</span><span class="hljs-params">(n)</span></span><br>  <span class="hljs-attribute">margin</span> (- n)<br><br><span class="hljs-selector-tag">body</span><br>  <span class="hljs-built_in">pad</span>(<span class="hljs-number">5px</span>)<br></code></pre></td></tr></table></figure>
<p>编译后</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">body</span> {<br>  <span class="hljs-attribute">margin</span>: -<span class="hljs-number">5px</span>;<br>}<br></code></pre></td></tr></table></figure>
<h1 id="变量-variables"><a href="#4.-变量 Variables" class="headerlink" title="4.-变量 Variables"></a>4. 变量 Variables</h1>
<h2 id="使用变量"><a href="#4.1-使用变量" class="headerlink" title="4.1-使用变量"></a>4.1 使用变量</h2>
<p>我们可以将表达式赋值给变量，然后在整个样式表中使用变量：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-attribute">font-size</span> = <span class="hljs-number">14px</span><br><br><span class="hljs-selector-tag">body</span><br>    <span class="hljs-attribute">font</span> font-size Arial, sans-serif<br></code></pre></td></tr></table></figure>
<p>编译后</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">body</span>{<br>    <span class="hljs-attribute">font</span>: <span class="hljs-number">14px</span> Arial, sans-serif;<br>}<br></code></pre></td></tr></table></figure>
<p>变量甚至可以包含一个表达式列表：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-attribute">font-size</span> = <span class="hljs-number">14px</span><br><span class="hljs-attribute">font</span>-stack = <span class="hljs-string">"Lucida Grande"</span>, Arial, sans-serif<br><br><span class="hljs-selector-tag">body</span><br>    <span class="hljs-attribute">font</span> font-size font-stack<br></code></pre></td></tr></table></figure>
<p>编译为</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">body</span>{<br>    <span class="hljs-attribute">font</span>: <span class="hljs-number">14px</span> <span class="hljs-string">"Lucida Grande"</span>, Arial, sans-serif;<br>}<br></code></pre></td></tr></table></figure>
<p>标识符（变量名，函数等）还可以包含<code>$</code>字符。例如</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-variable">$font</span>-size = <span class="hljs-number">14px</span><br>body{<br>    <span class="hljs-attribute">font</span>: <span class="hljs-variable">$font</span>-size sans-serif<br>}<br></code></pre></td></tr></table></figure>
<p>注：不可以使用<code>null</code>来表示空变量，但可以使用<code>()</code>来表示，如</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">empty = ()<br>body{<br>    <span class="hljs-attribute">font</span> empty sans-serif<br>}<br></code></pre></td></tr></table></figure>
<p>编译后</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">body</span>{<br>    <span class="hljs-attribute">font</span>: sans-serif;<br>}<br></code></pre></td></tr></table></figure>
<h2 id="属性查询-property-lookup"><a href="#4.2-属性查询 Property Lookup" class="headerlink" title="4.2-属性查询 Property Lookup"></a>4.2 属性查询 Property Lookup</h2>
<p>Stylus
的另外一个很酷的独特功能是不需要分配值给变量就可以定义引用属性。如下列中的<code>width: w = 150px</code>和<code>height: h = 80px</code></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-id">#logo</span><br>    <span class="hljs-attribute">position</span>: absolute<br>    <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span><br>    <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span><br>    <span class="hljs-attribute">width</span>: w = <span class="hljs-number">150px</span><br>    <span class="hljs-attribute">height</span>: h = <span class="hljs-number">80px</span><br>    <span class="hljs-attribute">margin-left</span>: <span class="hljs-built_in">-</span>(w / <span class="hljs-number">2</span>)<br>    <span class="hljs-attribute">margin-top</span>: <span class="hljs-built_in">-</span>(h / <span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure>
<p><code>w</code>和<code>h</code>要先赋值，才能在后面使用。</p>
<p>或者不使用变量名<code>w</code>和<code>h</code>，改用<code>@width</code>和<code>@height</code>获取宽度和高度：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-id">#logo</span><br>    <span class="hljs-attribute">position</span>: absolute<br>    <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span><br>    <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span><br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">150px</span><br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span><br>    <span class="hljs-attribute">margin-left</span>: <span class="hljs-built_in">-</span>(@width / <span class="hljs-number">2</span>)<br>    <span class="hljs-attribute">margin-top</span>: <span class="hljs-built_in">-</span>(@height / <span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure>
<p>该特性的另一个用途是可以在<code>mixins</code>中，根据其他存在的属性来定义属性。如下，如果不存在<code>z-index</code>，则设置<code>z-index: 1</code>:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">position</span><span class="hljs-params">()</span></span><br>    <span class="hljs-attribute">position</span>: arguments<br>    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span> unless @z-index<br>    <br>    <span class="hljs-selector-id">#logo</span><br>        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">20</span><br>        <span class="hljs-attribute">position</span>: absolute<br>        <br>    <span class="hljs-selector-id">#logo2</span><br>        <span class="hljs-attribute">position</span>: absolute<br></code></pre></td></tr></table></figure>
<p>编译后</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-id">#logo</span>{<br>    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">20</span>;<br>    <span class="hljs-attribute">position</span>: absolute;<br>}<br><span class="hljs-selector-id">#logo2</span>{<br>    <span class="hljs-attribute">position</span>: absolute;<br>    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;<br>}<br></code></pre></td></tr></table></figure>
<p>在查找属性时，属性会“向上冒泡”查找堆栈直到被发现，或者返回<code>null</code>。下面的例子中，<code>@color</code>最终会被解析为<code>blue</code></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">body</span><br>    <span class="hljs-attribute">color</span>: red<br>    <span class="hljs-selector-tag">ul</span><br>        <span class="hljs-selector-tag">li</span><br>            <span class="hljs-attribute">color</span>: blue<br>            <span class="hljs-selector-tag">a</span><br>                <span class="hljs-attribute">background-color</span>: @color<br></code></pre></td></tr></table></figure>
<h1 id="插值-interpolation"><a href="#5.-插值 Interpolation" class="headerlink" title="5.-插值 Interpolation"></a>5. 插值 Interpolation</h1>
<p>Stylus支持插值语法，可以使用<code>{}</code>包裹表达式，并把它们嵌入到标识符或者选择器中。</p>
<h2 id="标识符插值-identifier-interpolation">5.1 标识符插值 Identifier
Interpolation</h2>
<p>例如<code>-webkit-{'border' + '-radius'}</code>等价于<code>-webkit-border-radius</code>。下面的例子中使用了浏览器前缀(vendor
prefixes)来扩展属性。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">vendor</span><span class="hljs-params">(prop, args)</span></span><br>    -webkit-{prop} args<br>    -moz-{prop} args<br>    {prop} args<br>    <br><span class="hljs-function"><span class="hljs-title">border-radius</span><span class="hljs-params">()</span></span><br>    <span class="hljs-built_in">vendor</span>(<span class="hljs-string">'border-radius'</span>, arguments)<br>    <br><span class="hljs-function"><span class="hljs-title">box-shadow</span><span class="hljs-params">()</span></span><br>    <span class="hljs-built_in">vendor</span>(<span class="hljs-string">'box-shadow'</span>, arguments)<br>    <br><span class="hljs-selector-tag">button</span><br>    <span class="hljs-attribute">border-radius</span> <span class="hljs-number">1px</span> <span class="hljs-number">2px</span> / <span class="hljs-number">3px</span> <span class="hljs-number">4px</span><br></code></pre></td></tr></table></figure>
<p>编译后</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">button</span>{<br>    -webkit-<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">1px</span> <span class="hljs-number">2px</span> / <span class="hljs-number">3px</span> <span class="hljs-number">4px</span>;<br>    -moz-<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">1px</span> <span class="hljs-number">2px</span> / <span class="hljs-number">3px</span> <span class="hljs-number">4px</span>;<br>    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">1px</span> <span class="hljs-number">2px</span> / <span class="hljs-number">3px</span> <span class="hljs-number">4px</span>;<br>}<br></code></pre></td></tr></table></figure>
<h2 id="选择插值器-selector-interpolation">5.2 选择插值器 Selector
Interpolation</h2>
<p>插值同样适用于选择器。下面的例子展示了迭代给表格前5行设置不同的高度：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">table</span><br>    <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span><br>        <span class="hljs-selector-tag">tr</span><span class="hljs-selector-pseudo">:nth-child</span>({row})<br>            <span class="hljs-attribute">height</span>: <span class="hljs-number">10px</span>*row<br></code></pre></td></tr></table></figure>
<p>编译后</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">table</span> <span class="hljs-selector-tag">tr</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">1</span>){<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">10px</span>;<br>}<br><span class="hljs-selector-tag">table</span> <span class="hljs-selector-tag">tr</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>){<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">20px</span>;<br>}<br><span class="hljs-selector-tag">table</span> <span class="hljs-selector-tag">tr</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">3</span>){<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;<br>}<br><span class="hljs-selector-tag">table</span> <span class="hljs-selector-tag">tr</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">4</span>){<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;<br>}<br><span class="hljs-selector-tag">table</span> <span class="hljs-selector-tag">tr</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">5</span>){<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;<br>}<br></code></pre></td></tr></table></figure>
<p>可以通过创建一个字符串变量并放入<code>{}</code>中，来实现把多个选择器放在一起：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">mySelectors = <span class="hljs-string">'#foo, #bar, .baz'</span><br><br>{mySelector}<br>    <span class="hljs-attribute">background</span>: <span class="hljs-number">#000</span><br></code></pre></td></tr></table></figure>
<p>编译后</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-id">#foo</span>,<br><span class="hljs-selector-id">#bar</span>,<br><span class="hljs-selector-class">.baz</span>{<br>    <span class="hljs-attribute">background</span>: <span class="hljs-number">#000</span>;<br>}<br></code></pre></td></tr></table></figure>
<h1 id="运算符-operators"><a href="#6.-运算符 Operators" class="headerlink" title="6.-运算符 Operators"></a>6. 运算符 Operators</h1>
<h2 id="运算符优先级-operator-precedence">6.1 运算符优先级 Operator
Precedence</h2>
<p>运算符优先级从高到低如下</p>
<figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs md">.<br>[]<br>! ~ + -<br>is defined<br>** * / %<br><span class="hljs-bullet">+</span> -<br>... ..<br>&lt;= &gt;= &lt; &gt;<br>in<br>== is != is not isnt<br>is a<br>&amp;&amp; and || or<br>?:<br>= := ?= += -= <span class="hljs-emphasis">*= /= %=</span><br><span class="hljs-emphasis">not</span><br><span class="hljs-emphasis">if unless</span><br></code></pre></td></tr></table></figure>
<h2 id="一元运算符-unary-operators"><a href="#6.2-一元运算符 Unary Operators" class="headerlink" title="6.2-一元运算符 Unary Operators"></a>6.2 一元运算符 Unary Operators</h2>
<p>有效的一目运算符有：<code>!</code>,<code>not</code>,<code>-</code>,<code>+</code>和<code>~</code>。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs stylus">!<span class="hljs-number">0</span><br><span class="hljs-comment">// =&gt; true</span><br><br>!!<span class="hljs-number">0</span><br><span class="hljs-comment">// =&gt; false</span><br><br>!<span class="hljs-number">1</span><br><span class="hljs-comment">// =&gt; false</span><br><br>!!<span class="hljs-number">5px</span><br><span class="hljs-comment">// =&gt; true</span><br><br>-<span class="hljs-number">5px</span><br><span class="hljs-comment">// =&gt; -5px</span><br><br>--<span class="hljs-number">5px</span><br><span class="hljs-comment">// =&gt; 5px</span><br><br>not true<br><span class="hljs-comment">// =&gt; false</span><br><br>not not true<br><span class="hljs-comment">// =&gt; true</span><br></code></pre></td></tr></table></figure>
<p>逻辑运算符<code>not</code>优先级最低，因此下面的例子</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">a</span> = <span class="hljs-number">0</span><br><span class="hljs-selector-tag">b</span> = <span class="hljs-number">1</span><br><br>!<span class="hljs-selector-tag">a</span> and !<span class="hljs-selector-tag">b</span><br><span class="hljs-comment">// =&gt; false</span><br><span class="hljs-comment">// parsed as: (!a) and (!b)</span><br></code></pre></td></tr></table></figure>
<p>等价于</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">not <span class="hljs-selector-tag">a</span> or not <span class="hljs-selector-tag">b</span><br><span class="hljs-comment">// =&gt; false</span><br><span class="hljs-comment">// parsed as: not (a or b)</span><br></code></pre></td></tr></table></figure>
<h2 id="二元运算符-binary-operators">6.3 二元运算符 Binary
Operators</h2>
<h3 id="下标-subscript"><a href="#6.3.1-下标 Subscript <code>[]</code>" class="headerlink" title="6.3.1-下标 Subscript <code>[]</code>"></a>6.3.1 下标 Subscript <code>[]</code></h3>
<p>下标允许我们通过索引拿到表达式中的值。下标为负数时，表示从尾到首进行取值。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">list = <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span><br>list<span class="hljs-selector-attr">[0]</span><br><span class="hljs-comment">// =&gt; 1</span><br><br>list<span class="hljs-selector-attr">[-1]</span><br><span class="hljs-comment">// =&gt; 3</span><br></code></pre></td></tr></table></figure>
<p>带括号的表达式可以看作是元组（<code>(15px 5px)</code>，<code>(1 2 3)</code>）</p>
<h3 id="范围-range-..-...">6.3.2 范围 Range <code>..</code>
<code>...</code></h3>
<p><code>..</code>和<code>...</code>都能表示范围，但<code>N..M</code>包括<code>N</code>和<code>M</code>，而<code>N...M</code>只包括<code>N</code>不包括<code>M</code></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">1</span>..<span class="hljs-number">5</span><br><span class="hljs-comment">// =&gt; 1 2 3 4 5</span><br><span class="hljs-number">1</span>...<span class="hljs-number">5</span><br><span class="hljs-comment">// =&gt; 1 2 3 4</span><br><span class="hljs-number">5</span>..<span class="hljs-number">1</span><br><span class="hljs-comment">// =&gt; 5 4 3 2 1</span><br></code></pre></td></tr></table></figure>
<h3 id="加减法-addtive--">6.3.3 加减法 Addtive: <code>+</code>
<code>-</code></h3>
<p>做加减法运算时，既可以在同类型单位之间转换，如<code>ms</code>和<code>s</code>，又可以在不同类型单位之间转换，如<code>5s - 2px</code>得到<code>3s</code>。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">15px</span> - <span class="hljs-number">5px</span><br><span class="hljs-comment">// =&gt; 10px</span><br><br><span class="hljs-number">5</span> - <span class="hljs-number">2</span><br><span class="hljs-comment">// =&gt; 3</span><br><span class="hljs-number">5in</span> - <span class="hljs-number">50mm</span><br><span class="hljs-comment">// =&gt; 3.031in</span><br><br><span class="hljs-number">5s</span> -<span class="hljs-number">1000ms</span><br><span class="hljs-comment">// =&gt; 4s</span><br><br><span class="hljs-number">20mm</span> + <span class="hljs-number">4in</span><br><span class="hljs-comment">// =&gt; 121.6mm</span><br><br><span class="hljs-string">"foo "</span> + <span class="hljs-string">"bar"</span><br><span class="hljs-comment">// =&gt; "foo bar"</span><br><br><span class="hljs-string">"num "</span> + <span class="hljs-number">15</span><br><span class="hljs-comment">// =&gt; "num 15"</span><br></code></pre></td></tr></table></figure>
<h3 id="乘除法和求余-multiplicative">6.3.4 乘除法和求余 Multiplicative:
<code>/</code> <code>*</code> <code>%</code></h3>
<p>在属性值中使用<code>/</code>时请使用括号，因为css中<code>/</code>后面的值为行高<code>line-height</code>。</p>
<ul>
<li><code>font: 14px/1.5;</code>：字体大小14px，行高为字体的1.5倍；</li>
<li><code>font: (14px/1.5);</code>：字体大小(14÷1.5)px。</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">2000ms</span> + (<span class="hljs-number">1s</span> * <span class="hljs-number">2</span>)<br><span class="hljs-comment">// =&gt; 4000ms</span><br><br><span class="hljs-number">5s</span> / <span class="hljs-number">2</span><br><span class="hljs-comment">// =&gt; 2.5s</span><br><br><span class="hljs-number">4</span> % <span class="hljs-number">2</span><br><span class="hljs-comment">// =&gt; 0</span><br></code></pre></td></tr></table></figure>
<h3 id="指数-exponent"><a href="#6.3.5-指数 Exponent: <code>**</code>" class="headerlink" title="6.3.5-指数 Exponent: <code>**</code>"></a>6.3.5 指数 Exponent: <code>**</code></h3>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">2</span> ** <span class="hljs-number">8</span><br><span class="hljs-comment">// =&gt; 256</span><br></code></pre></td></tr></table></figure>
<h3 id="相等和关系运算符-equality-relational">6.3.6 相等和关系运算符
Equality &amp; Relational: <code>==</code> <code>!=</code>
<code>&gt;=</code> <code>&lt;=</code> <code>&gt;</code>
<code>&lt;</code></h3>
<p>相等运算符可以用来比较单位、颜色、字符串，甚至标识符。</p>
<p>这是一个很强大的理念，可以将任意的标识符当作原子操作来比较，可以用<code>yes</code>或者<code>no</code>来代替原有的<code>true</code>或者<code>false</code></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">5</span> == <span class="hljs-number">5</span><br><span class="hljs-comment">// =&gt; true</span><br><br><span class="hljs-number">10</span> &gt; <span class="hljs-number">5</span><br><span class="hljs-comment">// =&gt; true</span><br><br><span class="hljs-number">#fff</span> == <span class="hljs-number">#fff</span><br><span class="hljs-comment">// =&gt; true</span><br><br>true == false<br><span class="hljs-comment">// =&gt; false</span><br><br>wahoo == yay<br><span class="hljs-comment">// =&gt; false</span><br><br>wahoo == wahoo<br><span class="hljs-comment">// =&gt; true</span><br><br><span class="hljs-string">"test"</span> == <span class="hljs-string">"test"</span><br><span class="hljs-comment">// =&gt; true</span><br><br>true is true<br><span class="hljs-comment">// =&gt; true</span><br><br><span class="hljs-string">'hey'</span> is not <span class="hljs-string">'bye'</span><br><span class="hljs-comment">// =&gt; true</span><br><br><span class="hljs-string">'hey'</span> isnt <span class="hljs-string">'bye'</span><br><span class="hljs-comment">// =&gt; true</span><br><br>(foo bar) == (foo bar)<br><span class="hljs-comment">// =&gt; true</span><br><br>(<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>) == (<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>)<br><span class="hljs-comment">// =&gt; true</span><br><br>(<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>) == (<span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">3</span>)<br><span class="hljs-comment">// =&gt; false</span><br></code></pre></td></tr></table></figure>
<p>别名</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">==	is<br>!=	is not<br>!=	isnt<br></code></pre></td></tr></table></figure>
<h3 id="短写运算符-shorthand-operators--">6.3.7 短写运算符 Shorthand
operators：<code>+=</code> <code>-=</code> <code>*=</code>
<code>/=</code> <code>%=</code></h3>
<p>与其他语言类似，stylus中的短写运算符可以支持多种运算</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs stylus">n = <span class="hljs-number">12</span><br>n += <span class="hljs-number">8</span><br><span class="hljs-comment">// =&gt; n = 20</span><br><br>int-list = <span class="hljs-number">12</span> <span class="hljs-number">23</span> <span class="hljs-number">0</span> <span class="hljs-number">32</span><br>int-list %= <span class="hljs-number">2</span><br><span class="hljs-comment">// =&gt; 12 % 2 = 0 (mod operator)</span><br><span class="hljs-comment">// =&gt; int-list = 0</span><br><br>mixed-list = node <span class="hljs-number">23</span> <span class="hljs-string">'str'</span><br>mixed-list %= <span class="hljs-number">2</span><br><span class="hljs-comment">// =&gt; mixed-list = node2</span><br><br>mixed-list = node <span class="hljs-number">23</span> <span class="hljs-string">'str'</span> <span class="hljs-number">#2e7</span><br>mixed-list += <span class="hljs-number">2</span><br><span class="hljs-comment">// =&gt; mixed-list = node2</span><br><br>s = <span class="hljs-string">'str'</span><br>s += <span class="hljs-number">2</span><br><span class="hljs-comment">// =&gt; s = 'str2'</span><br><br>c = <span class="hljs-number">#0e0</span><br>c -= <span class="hljs-number">#0e0</span><br><span class="hljs-comment">// =&gt; c = #000</span><br></code></pre></td></tr></table></figure>
<h3 id="真值-truthfulness"><a href="#6.3.8-真值 Truthfulness" class="headerlink" title="6.3.8-真值 Truthfulness"></a>6.3.8 真值 Truthfulness</h3>
<p>True:<code>0%</code>，<code>0px</code>，<code>1px</code>，<code>-1</code>，<code>-1px</code>，<code>hey</code>，<code>'hey'</code>，<code>(0 0 0)</code>，<code>('' '')</code></p>
<p>False:
<code>0</code>，<code>null</code>，<code>false</code>，<code>''</code></p>
<h3 id="逻辑运算符-logical-operators-or-and">6.3.9 逻辑运算符 Logical
Operators: <code>&amp;&amp;</code> <code>||</code> <code>or</code>
<code>and</code></h3>
<p>四个逻辑运算符的优先级是相同的</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">5</span> &amp;&amp; <span class="hljs-number">3</span><br><span class="hljs-comment">// =&gt; 3</span><br><br><span class="hljs-number">0</span> || <span class="hljs-number">5</span><br><span class="hljs-comment">// =&gt; 5</span><br><br><span class="hljs-number">0</span> &amp;&amp; <span class="hljs-number">5</span><br><span class="hljs-comment">// =&gt; 0</span><br><br><span class="hljs-number">#fff</span> is <span class="hljs-selector-tag">a</span> <span class="hljs-string">'rgba'</span> and <span class="hljs-number">15</span> is <span class="hljs-selector-tag">a</span> <span class="hljs-string">'unit'</span><br><span class="hljs-comment">// =&gt; true</span><br></code></pre></td></tr></table></figure>
<h3 id="存在运算符-existence-operator-in">6.3.10 存在运算符 Existence
Operator: <code>in</code></h3>
<p>判断<code>in</code>左边的对象是否存在于<code>in</code>右边的表达式中。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">nums = <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span><br><span class="hljs-number">1</span> <span class="hljs-keyword">in</span> nums<br><span class="hljs-comment">// =&gt; true</span><br><br><span class="hljs-number">5</span> <span class="hljs-keyword">in</span> nums<br><span class="hljs-comment">// =&gt; false</span><br></code></pre></td></tr></table></figure>
<p>适用于未定义的标识符：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">words = foo bar baz<br>bar <span class="hljs-keyword">in</span> words<br><span class="hljs-comment">// =&gt; true</span><br>HEY <span class="hljs-keyword">in</span> words<br><span class="hljs-comment">// =&gt; false</span><br></code></pre></td></tr></table></figure>
<p>适用于元组(tuples)：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs stylus">vals = (error <span class="hljs-string">'one'</span>) (error <span class="hljs-string">'two'</span>)<br>error <span class="hljs-keyword">in</span> vals<br><span class="hljs-comment">// =&gt; false</span><br><br>(error <span class="hljs-string">'one'</span>) <span class="hljs-keyword">in</span> vals<br><span class="hljs-comment">// =&gt; true</span><br>(error <span class="hljs-string">'two'</span>) <span class="hljs-keyword">in</span> vals<br><span class="hljs-comment">// =&gt; true</span><br>(error <span class="hljs-string">'something'</span>) <span class="hljs-keyword">in</span> vals<br><span class="hljs-comment">// =&gt; false</span><br></code></pre></td></tr></table></figure>
<p>混合(mixin)中使用<code>in</code>：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">pad</span><span class="hljs-params">(types = padding, n = <span class="hljs-number">5px</span>)</span></span><br>  <span class="hljs-keyword">if</span> <span class="hljs-attribute">padding</span> in types<br>    <span class="hljs-attribute">padding</span> n<br>  <span class="hljs-keyword">if</span> <span class="hljs-attribute">margin</span> in types<br>    <span class="hljs-attribute">margin</span> n<br><span class="hljs-selector-tag">body</span><br>  <span class="hljs-built_in">pad</span>()<br><span class="hljs-selector-tag">body</span><br>  <span class="hljs-built_in">pad</span>(<span class="hljs-attribute">margin</span>)<br><span class="hljs-selector-tag">body</span><br>  <span class="hljs-built_in">pad</span>(<span class="hljs-attribute">padding</span> margin, <span class="hljs-number">10px</span>)<br></code></pre></td></tr></table></figure>
<p>编译后</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">body</span>{<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;<br>}<br><span class="hljs-selector-tag">body</span>{<br>    <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span>;<br>}<br><span class="hljs-selector-tag">body</span>{<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;<br>    <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span>;<br>}<br></code></pre></td></tr></table></figure>
<h3 id="条件赋值-conditional-assignment">6.3.11 条件赋值 Conditional
Assignment: <code>?=</code> <code>:=</code></h3>
<p><code>?=</code>和<code>:=</code>表示当变量未被赋值时，则赋值；如果变量已经有值了，则不赋值。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-attribute">color</span> := white<br><span class="hljs-attribute">color</span> ?= white<br><span class="hljs-attribute">color</span> = color is defined ? color : white<br></code></pre></td></tr></table></figure>
<p>下例中，color不会被赋予值<code>black</code>，因为color已经被赋值<code>white</code>了。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-attribute">color</span> = white<br><span class="hljs-attribute">color</span> ?= black<br><br><span class="hljs-attribute">color</span><br><span class="hljs-comment">// =&gt; white</span><br></code></pre></td></tr></table></figure>
<h3 id="实例判断-instance-check-is-a">6.3.12 实例判断 Instance Check: is
a</h3>
<p>Stylus中能够使用<code>is a</code>来进行类型判断。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">15</span> is <span class="hljs-selector-tag">a</span> <span class="hljs-string">'unit'</span><br><span class="hljs-comment">// =&gt; true</span><br><br><span class="hljs-number">#fff</span> is <span class="hljs-selector-tag">a</span> <span class="hljs-string">'rgba'</span><br><span class="hljs-comment">// =&gt; true</span><br><br><span class="hljs-number">15</span> is <span class="hljs-selector-tag">a</span> <span class="hljs-string">'rgba'</span><br><span class="hljs-comment">// =&gt; false</span><br></code></pre></td></tr></table></figure>
<p>或者采用内置函数<code>type()</code></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">type</span><span class="hljs-params">(<span class="hljs-number">#fff</span>)</span></span> == <span class="hljs-string">'rgba'</span><br><span class="hljs-comment">// =&gt; true</span><br></code></pre></td></tr></table></figure>
<h3 id="变量声明-variable-definition-is-defined">6.3.13 变量声明
Variable Definition: is defined</h3>
<p><code>is defined</code>用来判断一个变量是否已经被赋值。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs stylus">foo is defined<br><span class="hljs-comment">// =&gt; false</span><br><br>foo = <span class="hljs-number">15px</span><br>foo is defined<br><span class="hljs-comment">// =&gt; true</span><br><br><span class="hljs-number">#fff</span> is defined<br><span class="hljs-comment">// =&gt; 'invalid "is defined" check on non-variable #fff'</span><br></code></pre></td></tr></table></figure>
<p>或者采用内置函数<code>lookup(name)</code>：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus">name = <span class="hljs-string">'blue'</span><br><span class="hljs-function"><span class="hljs-title">lookup</span><span class="hljs-params">(<span class="hljs-string">'light-'</span> + name)</span></span><br><span class="hljs-comment">// =&gt; null</span><br><br>light-blue = <span class="hljs-number">#80e2e9</span><br><span class="hljs-function"><span class="hljs-title">lookup</span><span class="hljs-params">(<span class="hljs-string">'light-'</span> + name)</span></span><br><span class="hljs-comment">// =&gt; #80e2e9</span><br></code></pre></td></tr></table></figure>
<p><code>is defined</code>很重要。如下例中，由于未声明的标识符会返回true，即使<code>ohnoes</code>未声明，<code>body</code>仍会被添加属性：<code>padding: 5px</code></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">body</span><br>    <span class="hljs-keyword">if</span> ohnoes<br>        <span class="hljs-attribute">padding</span> <span class="hljs-number">5px</span><br></code></pre></td></tr></table></figure>
<p>使用<code>is defined</code>更合理：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">body</span><br>    <span class="hljs-keyword">if</span> ohnoes is defined<br>        <span class="hljs-attribute">padding</span> <span class="hljs-number">5px</span><br></code></pre></td></tr></table></figure>
<h2 id="三元运算符-ternary"><a href="#6.4-三元运算符 Ternary" class="headerlink" title="6.4-三元运算符 Ternary"></a>6.4 三元运算符 Ternary</h2>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">num = <span class="hljs-number">15</span><br>num ? <span class="hljs-built_in">unit</span>(num, <span class="hljs-string">'px'</span>) : <span class="hljs-number">20px</span><br><span class="hljs-comment">// =&gt; 15px</span><br></code></pre></td></tr></table></figure>
<h2 id="转型-casting"><a href="#6.5-转型 Casting" class="headerlink" title="6.5-转型 Casting"></a>6.5 转型 Casting</h2>
<p><code>(expr) unit</code>和内置函数<code>unit()</code>一样，可以用来添加后缀。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">body</span><br>    n = <span class="hljs-number">5</span><br>    foo: (n)<span class="hljs-selector-tag">em</span><br>    foo: (n)%<br>    foo: (n + <span class="hljs-number">5</span>)%<br>    foo: (n * <span class="hljs-number">5</span>)px<br>    foo: <span class="hljs-built_in">unit</span>(n + <span class="hljs-number">5</span>, <span class="hljs-string">'%'</span>)<br>    foo: <span class="hljs-built_in">unit</span>(<span class="hljs-number">5</span> + <span class="hljs-number">180</span> / <span class="hljs-number">2</span>, deg)<br></code></pre></td></tr></table></figure>
<h2 id="颜色运算符-color-operations">6.6 颜色运算符 Color
Operations</h2>
<p>颜色之间可以相加</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">#0e0</span> + <span class="hljs-number">#0e0</span><br><span class="hljs-comment">// =&gt; #0f0</span><br></code></pre></td></tr></table></figure>
<p>也可以使用百分比调整数值，如调整亮度</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">#888</span> + <span class="hljs-number">50%</span><br><span class="hljs-comment">// =&gt; #c3c3c3</span><br><br><span class="hljs-number">#888</span> - <span class="hljs-number">50%</span><br><span class="hljs-comment">// =&gt; #444</span><br></code></pre></td></tr></table></figure>
<p>同样可以使用内置函数<code>rgb()</code>，<code>rgba()</code>，<code>hsl()</code>，<code>hsla()</code>来调整颜色</p>
<h2 id="格式化-sprintf"><a href="#6.6-格式化 Sprintf" class="headerlink" title="6.6-格式化 Sprintf"></a>6.6 格式化 Sprintf</h2>
<p>使用字符串格式化操作符<code>%</code>可以生成字面值，它在内部使用内置函数<code>s()</code>来转换参数：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-string">'X::Microsoft::Crap(%s)'</span> % <span class="hljs-number">#fc0</span><br><span class="hljs-comment">// =&gt; X::Microsoft::Crap(#fc0)</span><br></code></pre></td></tr></table></figure>
<p>多个值的情况要使用括号：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-string">'-webkit-gradient(%s, %s, %s)'</span> % (linear (<span class="hljs-number">0</span> <span class="hljs-number">0</span>) (<span class="hljs-number">0</span> <span class="hljs-number">100%</span>))<br><span class="hljs-comment">// =&gt; -webkit-gradient(linear, 0 0, 0 100%)</span><br></code></pre></td></tr></table></figure>
<h1 id="混合-mixins"><a href="#7.-混合 Mixins" class="headerlink" title="7.-混合 Mixins"></a>7. 混合 Mixins</h1>
<p>混合(mixins)和函数以相同的方式定义，但以不同的方式使用。</p>
<h2 id="混合的使用"><a href="#7.1-混合的使用" class="headerlink" title="7.1-混合的使用"></a>7.1 混合的使用</h2>
<p>例如下面所示的函数<code>border-radius(n)</code>，它也可以当作混合调用：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">border-radius</span><span class="hljs-params">(n)</span></span><br>    -webkit-<span class="hljs-attribute">border-radius</span> n<br>    -moz-<span class="hljs-attribute">border-radius</span> n<br>    <span class="hljs-attribute">border-radius</span> n<br></code></pre></td></tr></table></figure>
<p>当作函数使用：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">form</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[type=button]</span><br>    <span class="hljs-attribute">border-radius</span>(<span class="hljs-number">5px</span>)<br></code></pre></td></tr></table></figure>
<p>当作混合(mixins)使用，我们能省略括号，提供出色的、透明的浏览器属性支持。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">form</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[type=button]</span><br>    <span class="hljs-attribute">border-radius</span> <span class="hljs-number">5px</span> <br></code></pre></td></tr></table></figure>
<blockquote>
<p>作为混合的border-radius被视为属性，而不是函数的调用</p>
</blockquote>
<p>编译后</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">form</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[type=button]</span>{<br>    -webkit-<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;<br>    -moz-<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;<br>    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;<br>}<br></code></pre></td></tr></table></figure>
<p>因此，可以利用局部变量<code>arguments</code>来传递更多的参数：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">border-radius</span><span class="hljs-params">()</span></span><br>    -webkit-<span class="hljs-attribute">border-radius</span> arguments<br>    -moz-<span class="hljs-attribute">border-radius</span> arguments<br>    <span class="hljs-attribute">border-radius</span> arguments<br></code></pre></td></tr></table></figure>
<p>这样就可以如此<code>border-radius 1px 2px / 3px 4px</code>使用此混合(mixins)了：
此特性还可以给指定的浏览器提供透明的支持，如IE中的<code>opacity</code>属性：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus">support-<span class="hljs-keyword">for</span>-ie ?= true<br><span class="hljs-function"><span class="hljs-title">opacity</span><span class="hljs-params">(n)</span></span><br>  <span class="hljs-attribute">opacity</span> n<br>  <span class="hljs-keyword">if</span> support-<span class="hljs-keyword">for</span>-ie<br>    <span class="hljs-attribute">filter</span> <span class="hljs-built_in">unquote</span>(<span class="hljs-string">'progid:DXImageTransform.Microsoft.Alpha(Opacity='</span> + <span class="hljs-built_in">round</span>(n * <span class="hljs-number">100</span>) + <span class="hljs-string">')'</span>)<br><span class="hljs-selector-id">#logo</span><br>  <span class="hljs-selector-pseudo">&amp;:hover</span><br>    <span class="hljs-attribute">opacity</span> <span class="hljs-number">0.5</span><br></code></pre></td></tr></table></figure>
<p>编译后：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-id">#logo</span><span class="hljs-selector-pseudo">:hover</span> {<br>  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;<br>  <span class="hljs-attribute">filter</span>: progid:DXImageTransform.Microsoft.<span class="hljs-built_in">Alpha</span>(Opacity=<span class="hljs-number">50</span>);<br>}<br></code></pre></td></tr></table></figure>
<h2 id="父级引用选择器-parent-reference">7.2 父级引用选择器 Parent
Reference</h2>
<p>混合(mixins)可以将父引用符<code>&amp;</code>作用于父级而不是采用进一步的嵌套。</p>
<p>下面的例子创建了一个混合(mixins)<code>stripe(even, odd)</code>来给表格中的行设置<code>background-color</code>，其中<code>even</code>和<code>odd</code>有默认值。</p>
<p>在<code>tr</code>的嵌套中，先给所有行设置背景颜色<code>odd</code>，然后使用<code>&amp;</code>引用<code>tr</code>，给偶数行设置颜色<code>even</code>：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">stripe</span><span class="hljs-params">(even = <span class="hljs-number">#fff</span>, odd = <span class="hljs-number">#eee</span>)</span></span><br>  <span class="hljs-selector-tag">tr</span><br>    <span class="hljs-attribute">background-color</span> odd<br>    &amp;<span class="hljs-selector-class">.even</span><br>    <span class="hljs-selector-pseudo">&amp;:nth-child</span>(even)<br>      <span class="hljs-attribute">background-color</span> even<br></code></pre></td></tr></table></figure>
<p>然后我们可以使用此混合(mixins)：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">table</span><br>  <span class="hljs-built_in">stripe</span>()<br>  <span class="hljs-selector-tag">td</span><br>    <span class="hljs-attribute">padding</span> <span class="hljs-number">4px</span> <span class="hljs-number">10px</span><br>table<span class="hljs-selector-id">#users</span><br>  <span class="hljs-built_in">stripe</span>(<span class="hljs-number">#303030</span>, <span class="hljs-number">#494848</span>)<br>  <span class="hljs-selector-tag">td</span><br>    <span class="hljs-attribute">color</span> white<br></code></pre></td></tr></table></figure>
<p>或者，我们也可以在<code>stripe(even, odd)</code>中取消<code>&amp;</code>的使用：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">stripe</span><span class="hljs-params">(even = <span class="hljs-number">#fff</span>, odd = <span class="hljs-number">#eee</span>)</span></span><br>  <span class="hljs-selector-tag">tr</span><br>    <span class="hljs-attribute">background-color</span> odd<br>  <span class="hljs-selector-tag">tr</span><span class="hljs-selector-class">.even</span><br>  <span class="hljs-selector-tag">tr</span><span class="hljs-selector-pseudo">:nth-child</span>(even)<br>    <span class="hljs-attribute">background-color</span> even<br></code></pre></td></tr></table></figure>
<p>我们可以把<code>stripe</code>当成属性一样来调用：<code>stripe #fff #000</code>。</p>
<h2 id="块混合-block-mixins"><a href="#7.3-块混合 Block mixins" class="headerlink" title="7.3-块混合 Block mixins"></a>7.3 块混合 Block mixins</h2>
<p>可以使用<code>+</code>前缀将块传递给混合</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">foo</span><span class="hljs-params">()</span></span><br>    <span class="hljs-selector-class">.bar</span><br>        {block}<br>        <br>+<span class="hljs-built_in">foo</span>()<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span><br></code></pre></td></tr></table></figure>
<p>编译后</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.bar</span>{<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span>;<br>}<br></code></pre></td></tr></table></figure>
<p>被传入的块(blocks)在混合(mixins)内将作为<code>block</code>变量使用。</p>
<h2 id="混合内使用混合-mixing-mixins-in-mixins">7.4 混合内使用混合
Mixing Mixins in Mixins</h2>
<p>混合(mixins)中可以调用其他混合(mixins)。</p>
<p>下例创建了一个行内的list(由inline-list完成)，并使用逗号分隔(由comma-list完成)。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">inline-list</span><span class="hljs-params">()</span></span><br>  <span class="hljs-selector-tag">li</span><br>    <span class="hljs-attribute">display</span> inline<br><span class="hljs-function"><span class="hljs-title">comma-list</span><span class="hljs-params">()</span></span><br>  <span class="hljs-built_in">inline-list</span>()<br>  <span class="hljs-selector-tag">li</span><br>    <span class="hljs-selector-pseudo">&amp;:after</span><br>      <span class="hljs-attribute">content</span> <span class="hljs-string">', '</span><br>    <span class="hljs-selector-pseudo">&amp;:last-child</span><span class="hljs-selector-pseudo">:after</span><br>      <span class="hljs-attribute">content</span> <span class="hljs-string">''</span><br><span class="hljs-selector-tag">ul</span><br>  <span class="hljs-built_in">comma-list</span>()<br></code></pre></td></tr></table></figure>
<p>编译后</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:after</span> {<br>  <span class="hljs-attribute">content</span>: <span class="hljs-string">", "</span>;<br>}<br><span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:last-child</span><span class="hljs-selector-pseudo">:after</span> {<br>  <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>;<br>}<br><span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span> {<br>  <span class="hljs-attribute">display</span>: inline;<br>}<br></code></pre></td></tr></table></figure>
<h1 id="函数-functions"><a href="#8.-函数 Functions" class="headerlink" title="8.-函数 Functions"></a>8. 函数 Functions</h1>
<p>函数定义与mixins相同，但是函数可以返回一个值。</p>
<h2 id="返回值-return-values"><a href="#8.1-返回值 Return Values" class="headerlink" title="8.1-返回值 Return Values"></a>8.1 返回值 Return Values</h2>
<p>一个很简单的例子：两数相加函数</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">add</span><span class="hljs-params">(a, b)</span></span><br>    <span class="hljs-selector-tag">a</span> + b<br></code></pre></td></tr></table></figure>
<p>我们可以将上述函数用在条件表达式中或者作为属性值</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">body</span><br>    <span class="hljs-attribute">padding</span> <span class="hljs-built_in">add</span>(<span class="hljs-number">10px</span>, <span class="hljs-number">5</span>)<br></code></pre></td></tr></table></figure>
<p>输出为：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">body</span>{<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;<br>}<br></code></pre></td></tr></table></figure>
<h2 id="默认参数-argument-defaults"><a href="#8.2-默认参数 Argument Defaults" class="headerlink" title="8.2-默认参数 Argument Defaults"></a>8.2 默认参数 Argument Defaults</h2>
<p>在Stylus中，可以给参数列表中最右侧的参数赋予默认值或者表达式</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">add</span><span class="hljs-params">(a, b = a)</span></span><br>    <span class="hljs-selector-tag">a</span> + <span class="hljs-selector-tag">b</span><br>        <br><span class="hljs-function"><span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>)</span></span><br><span class="hljs-comment">// =&gt; 15</span><br><br><span class="hljs-function"><span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span><br><span class="hljs-comment">// =&gt; 20</span><br></code></pre></td></tr></table></figure>
<p><strong>注意：</strong>
因为参数默认是赋值，因此我们可以使用函数调用作为默认值：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">add</span><span class="hljs-params">(a, b = unit(a, px)</span></span>)<br>    <span class="hljs-selector-tag">a</span> + b<br></code></pre></td></tr></table></figure>
<h2 id="命名参数-named-parameters"><a href="#8.3-命名参数 Named Parameters" class="headerlink" title="8.3-命名参数 Named Parameters"></a>8.3 命名参数 Named Parameters</h2>
<p>函数可以接受命名参数。这可以免去记忆参数顺序的麻烦，或者说是提供了代码的可读性。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">subtract</span><span class="hljs-params">(a, b)</span></span><br>    <span class="hljs-selector-tag">a</span> - <span class="hljs-selector-tag">b</span><br>        <br><span class="hljs-function"><span class="hljs-title">subtract</span><span class="hljs-params">(b: <span class="hljs-number">10</span>, a: <span class="hljs-number">25</span>)</span></span><br></code></pre></td></tr></table></figure>
<h2 id="函数体-function-bodies"><a href="#8.4-函数体 Function Bodies" class="headerlink" title="8.4-函数体 Function Bodies"></a>8.4 函数体 Function Bodies</h2>
<p>在前面的<code>add()</code>函数中，我们使用内置函数<code>unit()</code>把每个参数的单位强制改成<code>px</code>。这样可以忽略单位自动转换，如<code>ms</code>和<code>s</code>之间的自动转换。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">add</span><span class="hljs-params">(a, b = a)</span></span><br>    <span class="hljs-selector-tag">a</span> = <span class="hljs-built_in">unit</span>(<span class="hljs-selector-tag">a</span>, px)<br>    <span class="hljs-selector-tag">b</span> = <span class="hljs-built_in">unit</span>(<span class="hljs-selector-tag">b</span>, px)<br>    <span class="hljs-selector-tag">a</span> + b<br></code></pre></td></tr></table></figure>
<p>编译后</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css">add(<span class="hljs-number">15%</span>, <span class="hljs-number">10deg</span>)<br>// =&gt; <span class="hljs-number">25</span><br></code></pre></td></tr></table></figure>
<h2 id="多个返回值-multiple-return-values">8.5 多个返回值 Multiple
Return Values</h2>
<p>就像我们可以给变量赋多个值一样，我们可以在函数中返回多个值：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">sizes = <span class="hljs-number">15px</span> <span class="hljs-number">10px</span><br><br>sizes<span class="hljs-selector-attr">[0]</span><br><span class="hljs-comment">// =&gt; 15px</span><br></code></pre></td></tr></table></figure>
<p>函数中返回多个值：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">sizes</span><span class="hljs-params">()</span></span><br>    <span class="hljs-number">15px</span> <span class="hljs-number">10px</span><br>    <br><span class="hljs-function"><span class="hljs-title">sizes</span><span class="hljs-params">()</span></span><span class="hljs-selector-attr">[0]</span><br><span class="hljs-comment">// =&gt; 15px</span><br></code></pre></td></tr></table></figure>
<p>一个小例外是返回值是标识符。例如，以下内容看起来像是对Stylus的属性赋值（因为没有运算符）：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">swap</span><span class="hljs-params">(a, b)</span></span><br>    <span class="hljs-selector-tag">b</span> a<br></code></pre></td></tr></table></figure>
<p>为消除歧义，我们可以用括号，或者使用return关键字：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">swap</span><span class="hljs-params">(a, b)</span></span><br>    (<span class="hljs-selector-tag">b</span> a)<br>    <br><span class="hljs-function"><span class="hljs-title">swap</span><span class="hljs-params">(a, b)</span></span><br>    return <span class="hljs-selector-tag">b</span> a<br></code></pre></td></tr></table></figure>
<h2 id="条件语句-conditionals"><a href="#8.6-条件语句 Conditionals" class="headerlink" title="8.6-条件语句 Conditionals"></a>8.6 条件语句 Conditionals</h2>
<p>假设我们想创建一个名为<code>stringish()</code>的函数来确定参数是否可以转换为字符串。我们检查<code>val</code>是字符串，还是<code>ident</code>（类似于字符串）。因为未定义的标识符将自己作为值，我们可以将它们与自己进行比较，如下所示（其中yes和no代替true和false）：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">stringish</span><span class="hljs-params">(val)</span></span><br>  <span class="hljs-keyword">if</span> val is <span class="hljs-selector-tag">a</span> <span class="hljs-string">'string'</span> or val is <span class="hljs-selector-tag">a</span> <span class="hljs-string">'ident'</span><br>    yes<br>  <span class="hljs-keyword">else</span><br>    no<br></code></pre></td></tr></table></figure>
<p>使用</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css">stringish('yay') == yes<br>// =&gt; true<br>  <br>stringish(yay) == yes<br>// =&gt; true<br>  <br>stringish(<span class="hljs-number">0</span>) == no<br>// =&gt; true<br></code></pre></td></tr></table></figure>
<p><strong>注意：</strong>‘yes’和’no’不是布尔值。此例中，它们只是未定义的标识符。
另一个例子：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">compare</span><span class="hljs-params">(a, b)</span></span><br>  <span class="hljs-keyword">if</span> <span class="hljs-selector-tag">a</span> &gt; <span class="hljs-selector-tag">b</span><br>    higher<br>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-selector-tag">a</span> &lt; <span class="hljs-selector-tag">b</span><br>    lower<br>  <span class="hljs-keyword">else</span><br>    equal<br></code></pre></td></tr></table></figure>
<p>使用</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">compare</span><span class="hljs-params">(<span class="hljs-number">5</span>, <span class="hljs-number">2</span>)</span></span><br><span class="hljs-comment">// =&gt; higher</span><br><br><span class="hljs-function"><span class="hljs-title">compare</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>)</span></span><br><span class="hljs-comment">// =&gt; lower</span><br><br><span class="hljs-function"><span class="hljs-title">compare</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>)</span></span><br><span class="hljs-comment">// =&gt; equal</span><br></code></pre></td></tr></table></figure>
<h2 id="别名-aliasing"><a href="#8.7-别名 Aliasing" class="headerlink" title="8.7-别名 Aliasing"></a>8.7 别名 Aliasing</h2>
<p>要为函数设置别名，只需将函数名称赋值给新标识符即可。例如，我们的<code>add()</code>函数可以设置别名为<code>plus()</code>，如下所示：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">plus = add<br><br><span class="hljs-function"><span class="hljs-title">plus</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)</span></span><br><span class="hljs-comment">// =&gt; 3</span><br></code></pre></td></tr></table></figure>
<h2 id="函数作为变量-variable-functions">8.8 函数作为变量 Variable
Functions</h2>
<p>函数的参数可是其他函数。下例中，我们的<code>invoke()</code>函数接受一个函数，所以我们可以传递<code>add()</code>或<code>sub()</code>。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">add</span><span class="hljs-params">(a, b)</span></span><br>  <span class="hljs-selector-tag">a</span> + <span class="hljs-selector-tag">b</span><br><br><span class="hljs-function"><span class="hljs-title">sub</span><span class="hljs-params">(a, b)</span></span><br>  <span class="hljs-selector-tag">a</span> - <span class="hljs-selector-tag">b</span><br><br><span class="hljs-function"><span class="hljs-title">invoke</span><span class="hljs-params">(a, b, fn)</span></span><br>  <span class="hljs-built_in">fn</span>(<span class="hljs-selector-tag">a</span>, b)<br><br><span class="hljs-selector-tag">body</span><br>  <span class="hljs-attribute">padding</span> <span class="hljs-built_in">invoke</span>(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>, add)<br>  <span class="hljs-attribute">padding</span> <span class="hljs-built_in">invoke</span>(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>, sub)<br></code></pre></td></tr></table></figure>
<p>编译后：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">body</span>{<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">15</span>;<br>    <span class="hljs-attribute">padding</span>: -<span class="hljs-number">5</span>;<br>}<br></code></pre></td></tr></table></figure>
<h2 id="匿名函数-anonymous-functions">8.9 匿名函数 Anonymous
functions</h2>
<p>我们可以使用<code>@(){}</code>语法在需要时使用匿名函数。以下是如何使用它来创建自定义<code>sort()</code>函数：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">sort</span><span class="hljs-params">(list, fn = null)</span></span><br>    <span class="hljs-comment">// default sort function</span><br>    <span class="hljs-keyword">if</span> fn == null<br>        fn = @(<span class="hljs-selector-tag">a</span>, b){<br>            <span class="hljs-selector-tag">a</span> &gt; <span class="hljs-selector-tag">b</span><br>        }<br>        <br>    <span class="hljs-comment">// bubble sort</span><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">$i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>.<span class="hljs-selector-class">.length</span>(list) - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> <span class="hljs-variable">$j</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-variable">$i</span> - <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">fn</span>(list<span class="hljs-selector-attr">[$j]</span>, list<span class="hljs-selector-attr">[$i]</span>)<br>                <span class="hljs-variable">$temp</span> = list<span class="hljs-selector-attr">[$j]</span><br>                list<span class="hljs-selector-attr">[$i]</span> = list<span class="hljs-selector-attr">[$j]</span><br>                list<span class="hljs-selector-attr">[$j]</span> = <span class="hljs-variable">$temp</span><br>    return list<br>    <br>    <span class="hljs-built_in">sort</span>(<span class="hljs-string">'e'</span> <span class="hljs-string">'c'</span> <span class="hljs-string">'f'</span> <span class="hljs-string">'a'</span> <span class="hljs-string">'b'</span> <span class="hljs-string">'d'</span>)<br>    <span class="hljs-comment">// =&gt; 'a' 'b' 'c' 'd' 'e' 'f'</span><br>    <br>    <span class="hljs-built_in">sort</span>(<span class="hljs-number">5</span> <span class="hljs-number">4</span> <span class="hljs-number">6</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">4</span>, @(<span class="hljs-selector-tag">a</span>, b){<br>        <span class="hljs-selector-tag">a</span> &lt; <span class="hljs-selector-tag">b</span><br>    })<br>    <span class="hljs-comment">// =&gt; 6 5 4 3 2 1</span><br></code></pre></td></tr></table></figure>
<h2 id="参数-arguments"><a href="#8.10-参数 arguments" class="headerlink" title="8.10-参数 arguments"></a>8.10 参数 arguments</h2>
<p><code>arguments</code>可用于所有函数体，它包含传递进来的所有参数。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">sum</span><span class="hljs-params">()</span></span><br>    n = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> arguments<br>        n = n + num<br>        <br><span class="hljs-function"><span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)</span></span><br><span class="hljs-comment">// =&gt; 15</span><br></code></pre></td></tr></table></figure>
<h2 id="哈希的例子-hash-example"><a href="#8.11-哈希的例子 Hash Example" class="headerlink" title="8.11-哈希的例子 Hash Example"></a>8.11 哈希的例子 Hash Example</h2>
<p>下面我们定义了<code>get(hash，key)</code>函数，它返回<code>key</code>(或<code>null</code>)。我们遍历hash中的每一对，当第一个节点(<code>key</code>)匹配时返回该对的第二个节点。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">get</span><span class="hljs-params">(hash, key)</span></span><br>   return pair<span class="hljs-selector-attr">[1]</span> <span class="hljs-keyword">if</span> pair<span class="hljs-selector-attr">[0]</span> == key <span class="hljs-keyword">for</span> pair <span class="hljs-keyword">in</span> hash<br></code></pre></td></tr></table></figure>
<p>使用：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus">hash = (one <span class="hljs-number">1</span>) (two <span class="hljs-number">2</span>) (three <span class="hljs-number">3</span>)<br><br><span class="hljs-function"><span class="hljs-title">get</span><span class="hljs-params">(hash, two)</span></span><br><span class="hljs-comment">// =&gt; 2</span><br><span class="hljs-function"><span class="hljs-title">get</span><span class="hljs-params">(hash, three)</span></span><br><span class="hljs-comment">// =&gt; 3</span><br><span class="hljs-function"><span class="hljs-title">get</span><span class="hljs-params">(hash, something)</span></span><br><span class="hljs-comment">// =&gt; null</span><br></code></pre></td></tr></table></figure>
<div id="paginator"></div></div><div id="post-footer"><div id="pages"><div class="footer-link" style="width: 50%;text-align:right;border-right:1px #fe2 solid"><a href="/2023/05/31/stylus%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03/">← Next stylus学习笔记（3）</a></div><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/2023/05/16/evaluation/">Evaluation Method Prev →</a></div></div></div></div><div class="bottom-btn"><div><a id="to-top" onClick="scrolls.scrolltop();" title="To Top" style="opacity: 0; display: none;">∧</a><a id="to-index" href="#toc-div" title="To Catalog">≡</a><a id="color-mode" onClick="colorMode.change()" title="Change Theme"></a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="/img/faction/4.png" alt="Logo"></a><h1 id="Dr"><a href="/">冯露露</a></h1><div id="description"><p>分享兴趣爱好的技术博客</p></div></div><div id="aside-block"><div id="toc-div"><h1>Catalog</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-text">0. 简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-stylus"><span class="toc-text">1. 安装 stylus</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-stylus"><span class="toc-text">2. 使用 stylus</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%B8%AE%E5%8A%A9"><span class="toc-text">2.1 使用帮助</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E6%96%87%E4%BB%B6"><span class="toc-text">2.2 编译文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E5%99%A8-selectors"><span class="toc-text">3. 选择器 Selectors</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%A9%E8%BF%9B-indentation"><span class="toc-text">3.1 缩进 Indentation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%84%E5%88%99%E9%9B%86-rule-sets"><span class="toc-text">3.2 规则集 Rule Sets</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%88%B6%E7%BA%A7%E5%BC%95%E7%94%A8-parent-reference"><span class="toc-text">3.3 父级引用 Parent Reference</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%83%A8%E5%88%86%E5%BC%95%E7%94%A8-partial-reference"><span class="toc-text">3.4 部分引用 Partial Reference</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%A6%E8%8C%83%E5%9B%B4%E7%9A%84%E9%83%A8%E5%88%86%E5%BC%95%E7%94%A8-ranges-in-partial-references"><span class="toc-text">3.5
带范围的部分引用 Ranges in partial references</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%BC%95%E7%94%A8-initial-reference"><span class="toc-text">3.6 初始引用 Initial Reference</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%B8%E5%AF%B9%E5%BC%95%E7%94%A8-relative-reference"><span class="toc-text">3.7 相对引用 Relative
Reference</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B9%E5%BC%95%E7%94%A8-root-reference"><span class="toc-text">3.8 根引用 Root Reference</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A7%E4%B9%89-disambiguation"><span class="toc-text">3.9 歧义 Disambiguation</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%98%E9%87%8F-variables"><span class="toc-text">4. 变量 Variables</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F"><span class="toc-text">4.1 使用变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E6%9F%A5%E8%AF%A2-property-lookup"><span class="toc-text">4.2 属性查询 Property Lookup</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8F%92%E5%80%BC-interpolation"><span class="toc-text">5. 插值 Interpolation</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%87%E8%AF%86%E7%AC%A6%E6%8F%92%E5%80%BC-identifier-interpolation"><span class="toc-text">5.1 标识符插值 Identifier
Interpolation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E6%8F%92%E5%80%BC%E5%99%A8-selector-interpolation"><span class="toc-text">5.2 选择插值器 Selector
Interpolation</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6-operators"><span class="toc-text">6. 运算符 Operators</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6%E4%BC%98%E5%85%88%E7%BA%A7-operator-precedence"><span class="toc-text">6.1 运算符优先级 Operator
Precedence</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E5%85%83%E8%BF%90%E7%AE%97%E7%AC%A6-unary-operators"><span class="toc-text">6.2 一元运算符 Unary Operators</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E5%85%83%E8%BF%90%E7%AE%97%E7%AC%A6-binary-operators"><span class="toc-text">6.3 二元运算符 Binary
Operators</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E6%A0%87-subscript"><span class="toc-text">6.3.1 下标 Subscript []</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8C%83%E5%9B%B4-range-..-..."><span class="toc-text">6.3.2 范围 Range ..
...</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E5%87%8F%E6%B3%95-addtive--"><span class="toc-text">6.3.3 加减法 Addtive: +
-</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B9%98%E9%99%A4%E6%B3%95%E5%92%8C%E6%B1%82%E4%BD%99-multiplicative"><span class="toc-text">6.3.4 乘除法和求余 Multiplicative:
&#x2F; * %</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E6%95%B0-exponent"><span class="toc-text">6.3.5 指数 Exponent: **</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E7%AD%89%E5%92%8C%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6-equality-relational"><span class="toc-text">6.3.6 相等和关系运算符
Equality &amp; Relational: &#x3D;&#x3D; !&#x3D;
&gt;&#x3D; &lt;&#x3D; &gt;
&lt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%AD%E5%86%99%E8%BF%90%E7%AE%97%E7%AC%A6-shorthand-operators--"><span class="toc-text">6.3.7 短写运算符 Shorthand
operators：+&#x3D; -&#x3D; *&#x3D;
&#x2F;&#x3D; %&#x3D;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9C%9F%E5%80%BC-truthfulness"><span class="toc-text">6.3.8 真值 Truthfulness</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6-logical-operators-or-and"><span class="toc-text">6.3.9 逻辑运算符 Logical
Operators: &amp;&amp; || or
and</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%9C%A8%E8%BF%90%E7%AE%97%E7%AC%A6-existence-operator-in"><span class="toc-text">6.3.10 存在运算符 Existence
Operator: in</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E8%B5%8B%E5%80%BC-conditional-assignment"><span class="toc-text">6.3.11 条件赋值 Conditional
Assignment: ?&#x3D; :&#x3D;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E5%88%A4%E6%96%AD-instance-check-is-a"><span class="toc-text">6.3.12 实例判断 Instance Check: is
a</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E-variable-definition-is-defined"><span class="toc-text">6.3.13 变量声明
Variable Definition: is defined</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E5%85%83%E8%BF%90%E7%AE%97%E7%AC%A6-ternary"><span class="toc-text">6.4 三元运算符 Ternary</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AC%E5%9E%8B-casting"><span class="toc-text">6.5 转型 Casting</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%9C%E8%89%B2%E8%BF%90%E7%AE%97%E7%AC%A6-color-operations"><span class="toc-text">6.6 颜色运算符 Color
Operations</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96-sprintf"><span class="toc-text">6.6 格式化 Sprintf</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B7%B7%E5%90%88-mixins"><span class="toc-text">7. 混合 Mixins</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B7%E5%90%88%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">7.1 混合的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%88%B6%E7%BA%A7%E5%BC%95%E7%94%A8%E9%80%89%E6%8B%A9%E5%99%A8-parent-reference"><span class="toc-text">7.2 父级引用选择器 Parent
Reference</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9D%97%E6%B7%B7%E5%90%88-block-mixins"><span class="toc-text">7.3 块混合 Block mixins</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B7%E5%90%88%E5%86%85%E4%BD%BF%E7%94%A8%E6%B7%B7%E5%90%88-mixing-mixins-in-mixins"><span class="toc-text">7.4 混合内使用混合
Mixing Mixins in Mixins</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%BD%E6%95%B0-functions"><span class="toc-text">8. 函数 Functions</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E5%80%BC-return-values"><span class="toc-text">8.1 返回值 Return Values</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0-argument-defaults"><span class="toc-text">8.2 默认参数 Argument Defaults</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E5%90%8D%E5%8F%82%E6%95%B0-named-parameters"><span class="toc-text">8.3 命名参数 Named Parameters</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E4%BD%93-function-bodies"><span class="toc-text">8.4 函数体 Function Bodies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E4%B8%AA%E8%BF%94%E5%9B%9E%E5%80%BC-multiple-return-values"><span class="toc-text">8.5 多个返回值 Multiple
Return Values</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5-conditionals"><span class="toc-text">8.6 条件语句 Conditionals</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%AB%E5%90%8D-aliasing"><span class="toc-text">8.7 别名 Aliasing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E4%BD%9C%E4%B8%BA%E5%8F%98%E9%87%8F-variable-functions"><span class="toc-text">8.8 函数作为变量 Variable
Functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0-anonymous-functions"><span class="toc-text">8.9 匿名函数 Anonymous
functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E6%95%B0-arguments"><span class="toc-text">8.10 参数 arguments</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%88%E5%B8%8C%E7%9A%84%E4%BE%8B%E5%AD%90-hash-example"><span class="toc-text">8.11 哈希的例子 Hash Example</span></a></li></ol></li></ol></div></div><footer><nobr>Published with <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> Theme <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr>by <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/search.js"></script><script src="/js/arknights.js"></script><script src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script src="/js/pjax.js"></script><script class="pjax-js">reset= () => {code.findCode();
document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script></body></html>